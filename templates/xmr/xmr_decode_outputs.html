{% extends 'base3.html' %}
{% block title %}{% endblock %}

{% block head_style %}
 <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<script src="{{ url_for('static', filename='My97DatePicker/WdatePicker.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery-1.8.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery-2.1.4.min.js') }}"></script>
    <script src="{{ url_for('static', filename='layui/layui.js') }}"></script>
    <script>
    function ShowDiv(show_div,bg_div){
document.getElementById(show_div).style.display='block';
document.getElementById(bg_div).style.display='block' ;
var bgdiv = document.getElementById(bg_div);
bgdiv.style.width = document.body.scrollWidth;
// bgdiv.style.height = $(document).height();
$("#"+bg_div).height($(document).height());
}
//关闭弹出层
    function CloseDiv(show_div,bg_div)
{
document.getElementById(show_div).style.display='none';
document.getElementById(bg_div).style.display='none';
}
    </script>


{% endblock %}

{% block content %}
<style type="text/css">
     #kws::placeholder {
        color: #8a8f92;
    }
</style>
    <style>
.black_overlay{
display: none;
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: black;
z-index:1001;
-moz-opacity: 0.8;
opacity:.80;
filter: alpha(opacity=80);
}
.white_content {
display: none;
position: absolute;
top: 10%;
left: 10%;
width: 80%;
height: 80%;
border: 16px solid #0C0C0C;
background-color: white;
z-index:1002;
overflow: auto;
}
</style>
    {% extends 'baseXMR.html' %}

<br>


<div class="card">
        <div class="card-header">Decode output<button type="submit" style="float: right" class="btn btn-primary btn-sm" onclick="ShowDiv('MyDiv','fade')">Inquiry Assistant</button></div>
        <div class="card-body">
                    <form action="{{ url_for('xmr.query_pro_search') }}" class="layui-form"   id="query_form" >
                       <div class="layui-form-item" >
                         <div >
                             <input type="text" name="kw" style="height:100px;color: black; padding-bottom:60px;font-size:18px" class="layui-input" id="kws"
                                    value="" placeholder="示例：inputadress=bc1q*** and outputaddress=bc1q***"/>
                        </div>
                           <br>
                        <center><button type="submit"  class="btn btn-primary btn-sm"  value="" >Query</button>
                            <button type="reset"  style="margin-left: 20px "class="btn btn-primary btn-sm" onclick="layer.closeAll()">Reset condition</button></center>
                    </div>
        </form>
        </div>
    </div>

    <!-- start latestTransList-->
    <!-- start latestTransList-->
<br>
    <div class="bee-tab">
        <ul class="nav nav-tabs nav-tabs-alt">
            <li>
                <a class="active" >My inquiry</a>
            </li>
        </ul>
            <div class="tab-pane " id="query_hitory">
                    <table class="table " >
                        <thead>
             <tr>
                 <th>Serial number</th>
                <th>Key words</th>
                 <th>Note information</th>
                 <th>Query statement</th>
{#                 <th ></th>#}
                 <th ></th>
            </tr>
            </thead>
            <tbody>

        {% for single in list %}
            <tr>
                <td>{{ loop.index }}</td>
                <td title="{{ single['kw'] }}">
                    <a >{{ single['kw'] | truncate(10)}}</a>
                </td>
                <td title="{{ single['remark'] }}">{{ single['remark'] |truncate(30) }} </td>
                <td title="{{ single['text'] }}">{{ single['text'] |truncate(60) }} </td>
{#            <td><a style="color: cornflowerblue" id="{{ single }}" href="javascript:void(0);" onclick="querydetail(this.id)">View details</a></td>#}
            <td><button style="color: white" id="{{ single }}" class="btn btn-primary btn-sm" onclick="query_again(this.id)">Re-query</button></td>
            </tr>

        {% endfor %}

        </tbody>
                    </table>
                     {{ pagination.links }}
                <br>
            </div>
    </div>
<div id="fade" class="black_overlay">
</div>
<div id="MyDiv" class="white_content card">
<div style="text-align: right; cursor: default; height: 40px;" id="move">
<button class="btn btn-primary btn-sm" style="float: right;margin-right: 5px;margin-top: 5px"> <span style="font-size: 14px; " onclick="CloseDiv('MyDiv','fade')" color="black">Close</span></button>
</div>
    <div>
    <h3 style="color: black" align="center">Grammar Reference</h3>
    <br>
 <table id="transes-table2" class="table">
 <tr >
            <th style="color: black">Query Logic</th>
            <th style="color: black" >Description</th>
            <th style="color: black">Example</th>
        </tr>
        <tr>
                <td><a style="color: black">and</a>
                </td>
                <td>
                    <a style="color: black">Enter "and" in the search box to indicate the operation logic of "and"</a>
                </td>
                <td>
                    <a href="" style="color: black">date>2021-05-11 12:00:00 and TotalValueBTC=50</a>
                </td>
            </tr>
       <tr >
            <th style="color: black"></th>
            <th style="color: black" ></th>
            <th style="color: black"></th>
        </tr>

        <tr >
            <th style="color: black">Query Field</th>
            <th style="color: black">Description</th>
            <th style="color: black">Grammatical requirement</th>
        </tr>

        <tbody>
            <tr>
                <td><a style="color: black">Time</a>
                </td>
                <td>
                    <a style="color: black">Queries transactions within a specified time range</a>
                </td>
                <td>
                    <a href="" style="color: black">date>、<、=2021-05-11 12:00:00</a>
                </td>
            </tr>
        <tr>
            <td><a style="color: black">Coinbase Transaction</a></td>
            <td><a style="color: black">Query coinbase or non-Coinbase transactions</a></td>
            <td><a href="" style="color: black">isCoinbase=true、false</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Input Adress</a></td>
            <td><a style="color: black">Query the transaction that contains the specified input address</a></td>
            <td><a href="" style="color: black">inputaddress=3DGxAYYUA61WrrdbBac8Ra9eA9peAQwTJF</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Output Adress</a></td>
            <td><a style="color: black">Query the transactions that contain the specified output address</a></td>
            <td><a href="" style="color: black">outputaddress=3DGxAYYUA61WrrdbBac8Ra9eA9peAQwTJF</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Number of input addresses</a></td>
            <td><a style="color: black">Query the transaction with the specified number of input addresses</a></td>
            <td><a href="" style="color: black">vin_num>、<、=10</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Number of output addresses</a></td>
            <td><a style="color: black">Query the transactions with the specified number of output addresses</a></td>
            <td><a href="" style="color: black">vout_num>、<、=10</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Commission</a></td>
            <td><a style="color: black">Query the transaction with the specified fee</a></td>
            <td><a href="" style="color: black">fee>、<、=0.0001</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Height</a></td>
            <td><a style="color: black">Queries transactions within the specified block height range</a></td>
            <td><a href="" style="color: black">height>、<、=683000</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Transaction volume（btc）</a></td>
            <td><a style="color: black">To query the transactions for the specified transaction amount, the unit is btc</a></td>
            <td><a href="" style="color: black">TotalValueBTC>、<、=0.0001</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Transaction volume（usd）</a></td>
            <td><a style="color: black">To query the transactions for the specified transaction amount, the unit isusd</a></td>
            <td><a href="" style="color: black">TotalValueUSD>、<、=63600</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Single entry amount（btc）</a></td>
            <td><a style="color: black">Query a single address. Enter a transaction with a specified amount, the unit isbtc</a></td>
            <td><a href="" style="color: black">InputValueBTC>、<、=15</a></td>
        </tr>
        <tr>
            <td><a style="color: black">Single entry amount（btc）</a></td>
            <td><a style="color: black">Query the transactions with a specified output amount from a single address. The unit is btc</a></td>
            <td><a href="" style="color: black">OutputValueBTC>、<、=15</a></td>
        </tr>
         <tr>
            <td><a style="color: black">Transaction rate</a></td>
            <td><a style="color: black">Query a transaction with a specified transaction rate</a></td>
            <td><a href="" onclick="getText('feeRate>0.0001')"  style="color: black">feeRate>、 <、=0.0001</a></td>
        </tr>


            <tr></tr>

        </tbody>
    </table>
    </div>

</div>
{% endblock %}

{% block body_script %}
<script src="{{ url_for('static', filename='muban/3527/app.js') }}"></script>
    <script src="{{ url_for('static', filename='My97DatePicker/WdatePicker.js') }}"></script>
    <script src="{{ url_for('static', filename='layui/layui.js') }}"></script>
    {#    chartjs 3492 demo #}
<script type="text/javascript"
        src="{{ url_for('static', filename='plugins/superslide/jquery.SuperSlide.2.1.3.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/chart.js/Chart.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/chart.js/utils.js') }}"></script>

    <!--<script src="{{ url_for('static', filename='assets/js/page/transactions.js') }}"></script>-->

    <script>

      function add_tag(){
    layui.use(['layer', 'form'], function(){
        var layer = layui.layer
         ,form = layui.form;
       layer.open({
            type:1,
            skin:'layui-layer-molv',
            area: ['600px', '50%'],
            content:'<div>'+
            '<div >\n' +
                '          <div >\n' +
                '           <p style="color: black;font: 20px" >Enter the query fields and format strictly according to the format\n' +
                'Start Time starttime=2020-12-25 19:24:08,Deadline endtime=2020-12-25 19:24:08 Maximum transaction amount (BTC) maxvalue=double,Minimum transaction amount (BTC) minvalue=double,Commission fee=double Input Address inputaddr=String,Output Address outputaddr=String，Number of sender addresses vin_num=int,Number of receiver addresses vout_num=int,coinbaseTransaction isCoinbase=true/false</p>\n' +
                '          </div>\n' +
                '         </div>'+'</div>',
            btn: ['Save', 'Close'],
            btnAlign: 'c',
            yes: function(){
                saveNode();
            },
            btn2: function(){
                layer.closeAll();
            },
            success: function(layero, index){
                layui.use(['form','element'],function () {
                    var form = layui.form, element = layui.element;
                    form.render();
                });

            }
        });

});}

       function look_detail(single){
       addr = JSON.parse(single.replace(/'/g,'"')).addr;
       source = JSON.parse(single.replace(/'/g,'"')).source;
       category = JSON.parse(single.replace(/'/g,'"')).category;
       com = JSON.parse(single.replace(/'/g,'"')).com
       alert('Address:'+addr+'\n'+'Source:'+source+'\n'+'Label:'+category+'\n'+'Website:'+com);
            }

   </script>
    <script>
    function getText(str) {
        document.getElementById("kws").value=str

    }
    function querydetail(single){
       keyword = JSON.parse(single.replace(/'/g,'"')).kw;
       maxval = JSON.parse(single.replace(/'/g,'"')).maxval;
       minval = JSON.parse(single.replace(/'/g,'"')).minval;
       {#domain = JSON.parse(single.replace(/'/g,'"')).domain;#}
       sdate = JSON.parse(single.replace(/'/g,'"')).sdate;
       edate = JSON.parse(single.replace(/'/g,'"')).edate;
       inputaddr=JSON.parse(single.replace(/'/g,'"')).input;
       outputaddr=JSON.parse(single.replace(/'/g,'"')).output;
       height=JSON.parse(single.replace(/'/g,'"')).height;
       fee=JSON.parse(single.replace(/'/g,'"')).fee;
       inputnum=JSON.parse(single.replace(/'/g,'"')).inputnum;
       outputnum=JSON.parse(single.replace(/'/g,'"')).outputnum;
       topic=JSON.parse(single.replace(/'/g,'"')).topic;
        specvalue=JSON.parse(single.replace(/'/g,'"')).specvalue;
        remark=JSON.parse(single.replace(/'/g,'"')).remark;
       {#alert(keyword+maxval+minval+sdate+edate);#}
      var Udata= JSON.stringify({"maxvalue":maxval,"minvalue":minval,"sdate":sdate,"edate":edate,"kw":keyword,"input":inputaddr,"output":outputaddr,"height":height,"fee":fee,"inputnum":inputnum,"outputnum":outputnum,"topic":topic,"specvalue":specvalue,"remark":remark});
      document.getElementById("maxvalues").value=maxval;
       document.getElementById("minvalues").value=minval;
       document.getElementById("sdates").value=sdate;
       document.getElementById("edates").value=edate;
       document.getElementById("inputaddrs").value=inputaddr;
       document.getElementById("outputaddrs").value=outputaddr;
       document.getElementById("heights").value=height;
       document.getElementById("fees").value=fee;
       document.getElementById("inputnums").value=inputnum;
        document.getElementById("outputnums").value=outputnum;
        document.getElementById("topics").value=topic;
       document.getElementById("specvalues").value=specvalue;
       document.getElementById("keywords").value=keyword;

       document.getElementById("remarks").value=remark;
       document.getElementById("query_form").action="{{ url_for('btc.btc_queryhistory_detail') }}";
       document.getElementById("query_form").submit();
            }
    function query_again(single){
       kw = JSON.parse(single.replace(/'/g,'"')).text;
       document.getElementById("kws").value=kw;
       document.getElementById("query_form").action="{{ url_for('btc.query_pro_search') }}";
       document.getElementById("query_form").submit();
        {#alert(kw)#}
            }

    </script>
{% endblock %}